
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>Flinkѧϰ | 山上掏金</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="wenxi">
    

    
    <meta name="description" content="����flink��ʵ���е�һЩ���飬�����ż�����һ������ʶ;flink�Ĵ��ڣ��ύ���е�����壬�������ݣ��������±�д���������㣬��ȡcsv�ļ��ȣ���Ҫ��һЩʵ���ıʼǣ��Ƚϴ��ԣ������ٿ�������ϸд�£��ֳɸ�����С�㡣 ���ȴ�ͳ�Ƶ��ʳ���������ͳ����ʵʱ����socket���">
<meta name="keywords" content="����,���ż���,ʵ������">
<meta property="og:type" content="article">
<meta property="og:title" content="Flinkѧϰ">
<meta property="og:url" content="https://chlyzzo.github.io/2017/05/19/flink学习/index.html">
<meta property="og:site_name" content="山上掏金">
<meta property="og:description" content="����flink��ʵ���е�һЩ���飬�����ż�����һ������ʶ;flink�Ĵ��ڣ��ύ���е�����壬�������ݣ��������±�д���������㣬��ȡcsv�ļ��ȣ���Ҫ��һЩʵ���ıʼǣ��Ƚϴ��ԣ������ٿ�������ϸд�£��ֳɸ�����С�㡣 ���ȴ�ͳ�Ƶ��ʳ���������ͳ����ʵʱ����socket���">
<meta property="og:updated_time" content="2017-06-07T15:23:18.220Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Flinkѧϰ">
<meta name="twitter:description" content="����flink��ʵ���е�һЩ���飬�����ż�����һ������ʶ;flink�Ĵ��ڣ��ύ���е�����壬�������ݣ��������±�д���������㣬��ȡcsv�ļ��ȣ���Ҫ��һЩʵ���ıʼǣ��Ƚϴ��ԣ������ٿ�������ϸд�£��ֳɸ�����С�㡣 ���ȴ�ͳ�Ƶ��ʳ���������ͳ����ʵʱ����socket���">

    
    <link rel="alternative" href="/atom.xml" title="山上掏金" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/logo.png">
    <link rel="apple-touch-icon-precomposed" href="/img/logo.png">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="山上掏金" title="山上掏金"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="山上掏金">山上掏金</a></h1>
				<h2 class="blog-motto">每天早上起床是为了比昨天更快乐，掏金者新的一天是零的开始.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:chlyzzo.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/05/19/flink学习/" title="Flinkѧϰ" itemprop="url">Flinkѧϰ</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wenxi" target="_blank" itemprop="author">wenxi</a>
		
  <p class="article-time">
    <time datetime="2017-05-19T14:46:57.000Z" itemprop="datepublished"> 发表于 2017-05-19 22:46:57</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#flink-��datastrema��window����"><span class="toc-number">1.</span> <span class="toc-text">flink ��datastrema��window����</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#flink�µ�windows��time���ͣ�"><span class="toc-number">1.1.</span> <span class="toc-text">flink�µ�windows��time���ͣ�</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flink�µJ��ڶ��壬"><span class="toc-number">2.</span> <span class="toc-text">flink�µĴ��ڶ��壬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WindowedStream"><span class="toc-number">3.</span> <span class="toc-text">WindowedStream</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flink���еĲ�������"><span class="toc-number">4.</span> <span class="toc-text">flink���еĲ�������,</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flink�ܹ�����ѧϰ"><span class="toc-number">5.</span> <span class="toc-text">flink�ܹ�����ѧϰ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#��������o������"><span class="toc-number">5.1.</span> <span class="toc-text">��������ô������?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#�ֲ�ʽ-yarn-��A"><span class="toc-number">6.</span> <span class="toc-text">�ֲ�ʽ,yarn,��Ⱥ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#�dz��oL���flink�µl����Ͳ���"><span class="toc-number">7.</span> <span class="toc-text">�ǳ��õĽ���flink�µĺ����Ͳ���</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#��������-�ڹ��캯����ʹ��"><span class="toc-number">8.</span> <span class="toc-text">��������,�ڹ��캯����ʹ��</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ʹ��withParameters-Configuration"><span class="toc-number">9.</span> <span class="toc-text">ʹ��withParameters(Configuration)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#o�ֲ���"><span class="toc-number">10.</span> <span class="toc-text">ȫ�ֲ���</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#richfunction��ʹ��"><span class="toc-number">11.</span> <span class="toc-text">richfunction��ʹ��</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#state��ʹ��"><span class="toc-number">12.</span> <span class="toc-text">state��ʹ��</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flink-�µ�����-��������"><span class="toc-number">13.</span> <span class="toc-text">flink �µ�����,��������</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flink-��ȡcsv�l��Ĳ�������"><span class="toc-number">14.</span> <span class="toc-text">flink ��ȡcsv�ļ��Ĳ�������,</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#����L¼�µ������l�"><span class="toc-number">15.</span> <span class="toc-text">����Ŀ¼�µ������ļ�,</span></a></li></ol>
		
		</div>
		
		<p>����flink��ʵ���е�һЩ���飬�����ż�����һ������ʶ;<br>flink�Ĵ��ڣ��ύ���е�����壬�������ݣ��������±�д���������㣬��ȡcsv�ļ��ȣ�<br>��Ҫ��һЩʵ���ıʼǣ��Ƚϴ��ԣ������ٿ�������ϸд�£��ֳɸ�����С�㡣</p>
<p>���ȴ�ͳ�Ƶ��ʳ���������ͳ����ʵʱ����socket����Ϣ��ͳ�Ƶģ���Ҫһ�����ڣ������趨Ϊÿ��5��ͳ��һ�Σ�</p>
<p>����</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">public class WindowWordCount &#123;</div><div class="line">       public static void main(String[] args) throws Exception &#123;</div><div class="line">                StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</div><div class="line">                DataStream&lt;Tuple2&lt;String, Integer&gt;&gt; dataStream = env</div><div class="line">                .socketTextStream(&quot;localhost&quot;, 9999)</div><div class="line">                .flatMap(new Splitter())</div><div class="line">                .keyBy(0)</div><div class="line">                .timeWindow(Time.of(5, TimeUnit.SECONDS))</div><div class="line">                .sum(1);</div><div class="line"></div><div class="line">        dataStream.print();</div><div class="line">        env.execute(&quot;Window WordCount&quot;);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    public static class Splitter implements FlatMapFunction&lt;String, Tuple2&lt;String, Integer&gt;&gt; &#123;</div><div class="line">        @Override</div><div class="line">        public void flatMap(String sentence, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; out) throws Exception &#123;</div><div class="line">            for (String word: sentence.split(&quot; &quot;)) &#123;</div><div class="line">                out.collect(new Tuple2&lt;String, Integer&gt;(word, 1));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>new Splitter()��Splitter implements FlatMapFunction<string, tuple2<string,="" integer="">&gt;</string,></p>
<h2 id="flink-��datastrema��window����"><a href="#flink-��datastrema��window����" class="headerlink" title="flink ��datastrema��window����"></a>flink ��datastrema��window����</h2><p>���Բο�<a href="https://ci.apache.org/projects/flink/flink-docs-release-0.10/apis/streaming_guide.html#working-with-time" target="_blank" rel="external">�����ĵ�</a></p>
<h3 id="flink�µ�windows��time���ͣ�"><a href="#flink�µ�windows��time���ͣ�" class="headerlink" title="flink�µ�windows��time���ͣ�"></a>flink�µ�windows��time���ͣ�</h3><p>import org.apache.flink.streaming.api.TimeCharacteristic</p>
<ul>
<li><p>processing time����ִ��ת�����ӵ�ʱ�䣬�ֲ�ʽ���첽�²�������Ŀ�ġ�</p>
<pre><code>env.setStreamTimeCharacteristic(TimeCharacteristic.ProcessingTime)
</code></pre></li>
<li><p>event time���¼�ʱ�䣬�����¼���ʱ�䣬ͨ���ǽ��뵽flinkǰ�����ˣ�Ƕ���ڼ�¼������������</p>
<pre><code>env.setStreamTimeCharacteristic(TimeCharacteristic.EventTime)
ʱ��˳��������Ҳ����ȷ��������Ҫ���棩�����ӳ٣�
</code></pre></li>
<li>Ingestion time�����뵽flink��ʱ�䣬����ǰ����֮�䣬<pre><code>env.setStreamTimeCharacteristic(TimeCharacteristic.IngestionTime)
</code></pre></li>
</ul>
<p>watermark ʱ��ˮӡ����Դ������û��ʱ������ʱ��</p>
<p>�����¼�ʱ��event time�������²���<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Set env.setStreamTimeCharacteristic(TimeCharacteristic.EventTime)</div><div class="line">Use DataStream.assignTimestamps(...) in order to tell Flink how timestamps relate to events </div><div class="line">    (e.g., which record field is the timestamp)�����Ǽ�¼�а���ʱ���������ӣ�</div><div class="line">Set enableTimestamps(), as well the interval for watermark emission (</div><div class="line">    setAutoWatermarkInterval(long milliseconds)) in ExecutionConfig.</div></pre></td></tr></table></figure></p>
<h2 id="flink�µJ��ڶ��壬"><a href="#flink�µJ��ڶ��壬" class="headerlink" title="flink�µĴ��ڶ��壬"></a>flink�µĴ��ڶ��壬</h2><p>�����е�Ԫ��ʵ�ʴ洢�� Key/Value State �У�keyΪWindow��valueΪԪ�ؼ��ϣ����ۺ�ֵ��<br>��һ��Ԫ�ؽ�����ʱ��<br>    1,����window����ȥ�ĸ�����;<br>          ����ֻ��һ����ʾ�����洢���ݣ�Ҳ����ʱ�䡣<br>    2,ÿ��������һ��trigger���������ڵ�����ʱ�䣨�ô��ڼ���������ʱ�䣩;<br>           trigger����continue���ȴ�����fire�������������ݣ���purge���������ڣ���<br>         ������fire���򴰿ڱ���������һֱ���ڣ��ᱻ�������Σ�ֱ��purge��<br>    3,�������ڱ�fire���������������е�Ԫ��ָ����evictor��<br>         Evictor ��Ҫ�������������е�Ԫ���б������������Ƚ��봰�ڵĶ��ٸ�Ԫ����Ҫ���Ƴ���ʣ����Ԫ�ػύ���û�ָ���ĺ������д��ڵļ���<br>    4,���㺯����������window��trigger��evictor�������յ�����Ԫ�أ���������Ԫ�أ����ظ����Σ�<br>       ����ֵ�ɷ��ض�����һ�������㺯����max��min������WindowFunctionʵ�ֵġ���<br>��ע�⣬evictor��Ҫ�Դ���������Ԫ�ر��������˾ۺ�sum��minֻ�豣������ֵ����</p>
<h2 id="WindowedStream"><a href="#WindowedStream" class="headerlink" title="WindowedStream"></a>WindowedStream</h2><p>���� T ��������Ԫ�ص���������<br>K ��Ԫ�ص�key������<br>W�Ǵ�������<br>R ��ʼֵ��foldʱ�õ���<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">apply (6��apply����)  (k : Long, w : TimeWindow, T: Iterable[(Long, Long, Long)], out : Collector[(Long,String,String,Double)])</div><div class="line"></div><div class="line">     apply(WindowFunction&lt;T, R, K, W&gt; function)</div><div class="line">         </div><div class="line">     apply(WindowFunction&lt;T, R, K, W&gt; function, TypeInformation&lt;R&gt; resultType)</div><div class="line"></div><div class="line">     apply(ReduceFunction&lt;T&gt; reduceFunction, WindowFunction&lt;T, R, K, W&gt; function)</div><div class="line">     apply(ReduceFunction&lt;T&gt; reduceFunction, WindowFunction&lt;T, R, K, W&gt; function, TypeInformation&lt;R&gt; resultType)</div><div class="line">     </div><div class="line">     apply(R initialValue, FoldFunction&lt;T, R&gt; foldFunction, WindowFunction&lt;R, R, K, W&gt; function)</div><div class="line">     apply(R initialValue, FoldFunction&lt;T, R&gt; foldFunction, WindowFunction&lt;R, R, K, W&gt; function, TypeInformation&lt;R&gt; resultType)</div></pre></td></tr></table></figure></p>
<p><a href="https://m.aliyun.com/yunqi/articles/57828" target="_blank" rel="external">Blink ����</a></p>
<p>you can rely on the RichFunction’s open() method’s to load such data directly from a distributed file system.<br>DataStreamû��DistributedCache,���ǿ�����RichFunction’s open() �����ж�ȡ�ֲ�ʽ�洢���ļ�…</p>
<h2 id="flink���еĲ�������"><a href="#flink���еĲ�������" class="headerlink" title="flink���еĲ�������,"></a>flink���еĲ�������,</h2><p>Ŀǰ�õ�:flink �ύyarn��Ⱥ��<a href="https://ci.apache.org/projects/flink/flink-docs-master/setup/cli.html" target="_blank" rel="external">����</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">-yn,--yarncontainer &lt;arg&gt;            Number of YARN container to allocate(=Number of Task Managers)</div><div class="line"></div><div class="line">-ys,--yarnslots &lt;arg&gt;                Number of slots per TaskManager</div><div class="line"></div><div class="line">-yjm,--yarnjobManagerMemory &lt;arg&gt;    Memory for JobManager Container [inMB]</div><div class="line"></div><div class="line">-ytm,--yarntaskManagerMemory &lt;arg&gt;   Memory per TaskManager Container [inMB]</div></pre></td></tr></table></figure>
<p>yn��taskmanager�ĸ���,��worker�ĸ���,ys��slot����,��ÿ��taskmanager�ɼ���slot������,<br>yjm,<br>ytm,ÿһ��taskmanager�ڴ���С,</p>
<h2 id="flink�ܹ�����ѧϰ"><a href="#flink�ܹ�����ѧϰ" class="headerlink" title="flink�ܹ�����ѧϰ"></a><a href="https://ci.apache.org/projects/flink/flink-docs-release-1.0/concepts/concepts.html#parallel-dataflows" target="_blank" rel="external">flink�ܹ�����ѧϰ</a></h2><p>flink�����ݿ�����,datasetҲ����,��������,��ʼһ��������Դ,����һ��������sinks,һ��ת���ж���ת����������…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">��������������,source-&gt; </div><div class="line">                         transformation(flatmap,map,....����operators)-&gt; </div><div class="line">                                          ...-&gt; </div><div class="line">                                                 transformation(flatmap,map,....����operators)-&gt;</div><div class="line">                                                            sink</div></pre></td></tr></table></figure>
<p>���жȣ�һ��task��split�Ĳ���ʵ���������������ڲ�ͬ�㼶���趨;<br>   һ��task��split��������ʵ����һ��ʵ������inputData���Ӽ�����ʵ�������Ӽ����кϲ�û����</p>
<h3 id="��������o������"><a href="#��������o������" class="headerlink" title="��������ô������?"></a>��������ô������?</h3><p>  �ֲ�ʽ�Ͳ�����,�����Ƿ�����,����Ҳ���ɲ���subtask,(����subtask�Ƕ���������,��ͬ�߳�,��ͬ����,��ͬcontainers)<br>  ����subtask�ĸ����ǲ��ж�,parallelism,������operators����,һ���������ж�������,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">--&gt;    ---&gt;     ---&gt;</div><div class="line">             x        y  --&gt;sink</div><div class="line">--&gt;    ---&gt;     ---&gt;</div></pre></td></tr></table></figure></p>
<p>��������operators(����)֮������ʹһ��һǰ��,Ҳ�������ٷ���ǰ��,<br>���Ե���Redistributing,��������Ҫ�����ݽ������¹滮,����keyby,broadcast, rebalance</p>
<p>flink��,chains,����������һ��,�����Ż�����,</p>
<h2 id="�ֲ�ʽ-yarn-��A"><a href="#�ֲ�ʽ-yarn-��A" class="headerlink" title="�ֲ�ʽ,yarn,��Ⱥ"></a>�ֲ�ʽ,yarn,��Ⱥ</h2><p>����������������,master,JobManagers,Э���ֲ�ʽִ��,checkpoint,���ϻָ�,<br>������һ��,�������ö���,һ������,�����Ǳ���(����һ������,�����ǲ��ǿ��Ե���������������???)<br>worker,TaskManagers,ִ��task����ִ��subtasks,������,������һ��,</p>
<p>The master and worker processes��ʼ�ڼ�Ⱥ,����,����yarn����Դ������,</p>
<p>client�ͻ���,��������ʱ�ͳ����Ĳ���,׼����������master,Ȼ���Ͽ����߱������ӵȴ���Ϣ����,</p>
<p>Each worker (TaskManager) is a JVM process, and may execute one or more subtasks in separate threads. </p>
<p>To control how many tasks a worker accepts, a worker has so called task slots (at least one).</p>
<p>slot��һ��TaskManager�������м���task,һ��taskTaskManager�������ڴ���ytm,<br>ÿ��slot�ǹ̶�����Դ�Ӽ�,�ڴ󼯺�TaskManager��,Ҳ����slot�Ϸ�TaskManager����Դ,������ƽ��,<br>ÿ��slot�ǲ�ͬthreadִ��.</p>
<p>Having one slot per TaskManager means each task group runs in a separate JVM,<br>Having multiple slots means more subtasks share the same JVM,share data sets and data structures..</p>
<p>����slot,Ĭ�ϵ�����,</p>
<p>����,�����ļ���,���ķֲ�ʽ����,������step-function��Ƕ����������(Iterate and Delta Iterate),</p>
<p><a href="https://ci.apache.org/projects/flink/flink-docs-release-1.0/apis/batch/iterations.html" target="_blank" rel="external">��������</a></p>
<p>ֻ����dataset???</p>
<p>   1,iterate operator,<br>        1.1 Iteration Input: ��ʼ����������,��Դǰһ����������ǰһ������;<br>        1.2 Step Function: ÿһ�ε���ִ�еĺ���. operators, map, reduce, join, …,<br>        1.3 Next Partial Solution: ��һ�ε���������,<br>        1.4 Iteration Result: ����һ�ε���,����������sink������һ������,<br>  ��ֹ����,<br>      1,������������,�Զ�����,�ﵽ��������,����,��������;<br>      2,�Զ����ۺϺ�����׼��,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">val count = initial.iterate(10000) &#123; iterationInput: DataSet[Int] =&gt;</div><div class="line">      val result = iterationInput.map &#123; i =&gt;</div><div class="line">            val x = Math.random()</div><div class="line">            val y = Math.random()</div><div class="line">            i + (if (x * x + y * y &lt; 1) 1 else 0)</div><div class="line">      &#125;</div><div class="line">      result</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>  2,Delta Iterate Operator,<br>     ÿ�ε�����ѡ�񲿷����ݼ���,����ȫ��,�����ڸ߼����㷨,����ĳЩ���ݲ���ÿ�ε����Լ�������,ֻ��ע��ЩƵ���������ڼ���������,��������,û����������.<br>    2.1 Iteration Input: ��ʼ����������,��Դdata source����ǰһ������;<br>    2.2 Step Function: ÿһ�ε���ִ�еĺ���. operators, map, reduce, join, …,<br>    2.3 Next Workset/Update Solution Set: ��һ�ε�������workset,���ݿ�ͨ����ͬ���Ӹ��� ,<br>    2.4 Iteration Result: ����һ�ε���,����������sink������һ������,</p>
<p>��ֹ����,<br>      1,������������,�Զ�����,�ﵽ��������,����,��������;<br>      2,��һ�ε���workset����Ϊ0,Ҳ��������Ϊ��.(�Զ����ۺϺ�����׼��)</p>
<p>�������ݼ�,workset��solution,ÿ�ε����õ�newworkset��newsolution<br>To create a DeltaIteration call the iterateDelta(initialWorkset, maxIterations, key) on the initial solution set. The step function takes two parameters: (solutionSet, workset), and must return two values: (solutionSetDelta, newWorkset).</p>
<p>ParameterTool ���ϲ���<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">env.readCsvFile[Point](</div><div class="line">       params.get(&quot;points&quot;),</div><div class="line">       fieldDelimiter = &quot; &quot;,</div><div class="line">       includedFields = Array(0, 1))</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>flink�µ�functions<br>single abstract method  ��һ�ĳ��󷽷�,</p>
<p>1,coGroup(Iterable<in1> first, Iterable<in2> second, Collector<o> out)</o></in2></in1></p>
<pre><code>  set1.coGroup(set2).where(&lt;key-definition&gt;).equalTo(&lt;key-definition&gt;).with(new MyCoGroupFunction());

ע��,first:java.lang.Iterable[Int],
    Ȼ��,����ʱ,��ȡ��
import scala.collection.JavaConverters._
val scalaT2 = first.asScala.toList
</code></pre><p> 2,CombineFunction<in, out=""><br>         ��Ԫ�����ϲ�����,</in,></p>
<h2 id="�dz��oL���flink�µl����Ͳ���"><a href="#�dz��oL���flink�µl����Ͳ���" class="headerlink" title="�ǳ��õĽ���flink�µĺ����Ͳ���"></a>�ǳ��õĽ���flink�µĺ����Ͳ���</h2><p><a href="http://www.cnblogs.com/fxjwind/p/5168785.html" target="_blank" rel="external">����1</a><br><a href="https://ci.apache.org/projects/flink/flink-docs-release-0.10/apis/programming_guide.html" target="_blank" rel="external">����2</a></p>
<p>1,ʹ��Rich functions</p>
<p>Rich functions provide, in addition to the user-defined function (map, reduce, etc), four methods: open, close, getRuntimeContext, and setRuntimeContext.</p>
<p>Rich functions��ʹ�ú���ͨ��function��һ���ģ���ͬ�ľ��ǣ���4���ӿں�������������һЩ�����ĳ�����������function���Σ�������broadcast������accumulators��counter����Ϊ��Щ��������Ҫ��getRuntimeContext</p>
<p>2,Broadcast Variables<br>һ���������ڲ���ʵ���¿��Է��ʵ�����,�㲥data set�Ľṹ��collection,<br>withBroadcastSet(DataSet, String)�㲥һ��dataset<br>getRuntimeContext().getBroadcastVariable(String) at the target operator.���ʹ㲥��data set;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// 1. The DataSet to be broadcasted</div><div class="line">  DataSet&lt;Integer&gt; toBroadcast = env.fromElements(1, 2, 3);</div><div class="line"></div><div class="line">  DataSet&lt;String&gt; data = env.fromElements(&quot;a&quot;, &quot;b&quot;);</div><div class="line"></div><div class="line"> data.map(new RichMapFunction&lt;String, String&gt;() &#123;</div><div class="line">  @Override</div><div class="line">  public void open(Configuration parameters) throws Exception &#123; //open�����ᱻ����һ��,</div><div class="line">    // 3. Access the broadcasted DataSet as a Collection</div><div class="line">    Collection&lt;Integer&gt; broadcastSet = getRuntimeContext().getBroadcastVariable(&quot;broadcastSetName&quot;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line"></div><div class="line">  @Override //map���õĴ�����data�е�Ԫ�ظ���,</div><div class="line">  public String map(String value) throws Exception &#123;</div><div class="line">      ...</div><div class="line">  &#125;</div><div class="line"> &#125;).withBroadcastSet(toBroadcast, &quot;broadcastSetName&quot;); // 2. Broadcast the DataSet</div></pre></td></tr></table></figure>
<p>�㲥���ݼ���������Щ�����Ĺ������ݣ���Ҫ�����е�ʵ�����ʵ��ģ�����һЩ��ѯ��,(�����Ĺ�������)<br>���������ӣ��ὫtoBroadcast����Ϊ�㲥����broadcastSetName������������ʱ��������getRuntimeContext().getBroadcastVariable��ȡ�ñ���ʹ��</p>
<h2 id="��������-�ڹ��캯����ʹ��"><a href="#��������-�ڹ��캯����ʹ��" class="headerlink" title="��������,�ڹ��캯����ʹ��"></a>��������,�ڹ��캯����ʹ��</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">private static class MyFilter implements FilterFunction&lt;Integer&gt; &#123;</div><div class="line"></div><div class="line">  private final int limit; //����</div><div class="line"></div><div class="line">  public MyFilter(int limit) &#123;//���캯��</div><div class="line">    this.limit = limit;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  @Override</div><div class="line">  public boolean filter(Integer value) throws Exception &#123;</div><div class="line">    return value &gt; limit;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ʹ��withParameters-Configuration"><a href="#ʹ��withParameters-Configuration" class="headerlink" title="ʹ��withParameters(Configuration)"></a>ʹ��withParameters(Configuration)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Configuration config = new Configuration();</div><div class="line">config.setInteger(&quot;limit&quot;, 2);</div><div class="line"></div><div class="line">toFilter.filter(new RichFilterFunction&lt;Integer&gt;() &#123;</div><div class="line">    private int limit;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void open(Configuration parameters) throws Exception &#123;</div><div class="line">      limit = parameters.getInteger(&quot;limit&quot;, 0);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public boolean filter(Integer value) throws Exception &#123;</div><div class="line">      return value &gt; limit;</div><div class="line">    &#125;</div><div class="line">&#125;).withParameters(config);</div></pre></td></tr></table></figure>
<p>������withParameters�������õ�config����function</p>
<p>Ȼ����RichFunction��Open�ӿڣ���������������ʹ��</p>
<hr>
<h2 id="o�ֲ���"><a href="#o�ֲ���" class="headerlink" title="ȫ�ֲ���"></a>ȫ�ֲ���</h2><p>  (ȫ�ֲ���ֻ�����ڲ�����ʽ���㲥��������������dataset),����ȫ�ֲ���,�����ڸ��������ݼ�,���缸�����ı�����,�㲥�Ļ�<br>���Ѿʹ�.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Configuration conf = new Configuration();</div><div class="line">conf.setString(&quot;mykey&quot;,&quot;myvalue&quot;);</div><div class="line">final ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();</div><div class="line">env.getConfig().setGlobalJobParameters(conf);</div><div class="line"></div><div class="line"></div><div class="line">public static final class Tokenizer extends RichFlatMapFunction&lt;String, Tuple2&lt;String, Integer&gt;&gt; &#123;</div><div class="line"></div><div class="line">    private String mykey;</div><div class="line">    @Override</div><div class="line">    public void open(Configuration parameters) throws Exception &#123;</div><div class="line">      super.open(parameters);</div><div class="line">      ExecutionConfig.GlobalJobParameters globalParams = getRuntimeContext().getExecutionConfig().getGlobalJobParameters();</div><div class="line">      Configuration globConf = (Configuration) globalParams;</div><div class="line">      mykey = globConf.getString(&quot;mykey&quot;, null);</div><div class="line">    &#125;</div><div class="line">    // ... more here ...</div></pre></td></tr></table></figure></p>
<h2 id="richfunction��ʹ��"><a href="#richfunction��ʹ��" class="headerlink" title="richfunction��ʹ��"></a>richfunction��ʹ��</h2><p>Rich functions��ʹ�ú���ͨ��function��һ���ģ���ͬ�ľ��ǣ���4���ӿں�������������һЩ�����ĳ�����������function���Σ�������broadcast������accumulators��counter����Ϊ��Щ��������Ҫ��getRuntimeContext,</p>
<p>four methods: open, close, getRuntimeContext, and setRuntimeContext.</p>
<h2 id="state��ʹ��"><a href="#state��ʹ��" class="headerlink" title="state��ʹ��"></a>state��ʹ��</h2><pre><code>Key/Value state ֻ������KeyedStream,
3�ֲ�ͬ���͵�state��

ValueState����ֵ��state������ͨ��update(T)��T value()������

ListState&lt;T&gt;�� ��ֵ��state��ͨ��add(T)��Iterable&lt;T&gt; get()�������ͷ���
  ���ʵ�ǰ�洢��Ԫ��,
ReducingState&lt;T&gt;����ֵ״̬������ֻ����reduce�Ľ���
    �ۼ��ĵ���Ԫ��,

�������е�state������clear��������״̬����
</code></pre><p>��Щstate����ֻ�ܱ�״̬�ӿ�ʹ�ã�<br>����ȡ����״̬������ȡ����input element��key�����Բ�ͬ�ĵ���user function �õ���state value�ǲ�һ���ģ���Ϊelement��key ���ܲ�ͬ</p>
<p>����state����Ҫһ��StateDescriptor ����Ϊname����reference����state�������㶨������state�����ǵ�StateDescriptor ������unique�ġ�<br>��ͬ���͵�state���в�ͬ���͵�StateDescriptor</p>
<p>ValueState<t> getState(ValueStateDescriptor<t>)<br>ReducingState<t> getReducingState(ReducingStateDescriptor<t>)<br>ListState<t> getListState(ListStateDescriptor<t>)</t></t></t></t></t></t></p>
<p>State����ͨ��RuntimeContext�Ľӿڻ�ȡ������Ȼ��ͬ���͵�state����Ӧ�ڲ�ͬ�Ľӿڣ�<br>�ؼ��ǣ�����Ҫʹ��state������Ҫʹ��rich function������ͨ��function���޷���ȡ����</p>
<p><a href="http://blog.csdn.net/lmalds/article/details/52229827" target="_blank" rel="external">http://blog.csdn.net/lmalds/article/details/52229827</a><br>ListState��ʹ��<br><a href="http://blog.csdn.net/codemosi/article/details/51602204" target="_blank" rel="external">http://blog.csdn.net/codemosi/article/details/51602204</a><br>����state��ʹ��,</p>
<h2 id="flink-�µ�����-��������"><a href="#flink-�µ�����-��������" class="headerlink" title="flink �µ�����,��������"></a>flink �µ�����,��������</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">������,</div><div class="line"></div><div class="line">(&quot;org.apache.flink&quot; %% &quot;flink-ml&quot; % flinkVersion).</div><div class="line">                  exclude(&quot;org.apache.flink&quot;,&quot;flink-shaded-hadoop1_2.10&quot;),</div><div class="line"></div><div class="line">import org.apache.flink.ml.math.Vector</div><div class="line">import org.apache.flink.ml.math.VectorBuilder</div><div class="line">import org.apache.flink.ml.math.DenseVector</div><div class="line"></div><div class="line">val vec1 = &quot;12.3,45,55&quot;.split(&quot;,&quot;).map(_.toDouble)</div><div class="line">val flinkVec1 = DenseVector.apply(vec1)</div><div class="line">val vec2 = &quot;12.3,45,55&quot;.split(&quot;,&quot;).map(_.toDouble)</div><div class="line">val flinkVec2 = DenseVector.apply(vec2)</div><div class="line">    </div><div class="line">println(flinkVec1.dot(flinkVec2))</div></pre></td></tr></table></figure>
<p><a href="http://data-artisans.com/extending-the-yahoo-streaming-benchmark/" target="_blank" rel="external">���ص�</a></p>
<p><a href="https://yahooeng.tumblr.com/post/135321837876/benchmarking-streaming-computation-engines-at" target="_blank" rel="external">�Ż���</a></p>
<p><a href="http://flink-forward.org/category/news/" target="_blank" rel="external">2015flink����</a></p>
<p>ʹ�� <code>RichGroupReduceFunction</code> ʵ��<code>GroupCombineFunction</code> interface,<br>��shuffleǰcombining,�������縺��;<br>����,reduceʵ��reduceGroupҲ������������,<br>�����ٴ�ʹ��<code>.setCombineHint(CombineHint.HASH)</code> after the reduce.</p>
<h2 id="flink-��ȡcsv�l��Ĳ�������"><a href="#flink-��ȡcsv�l��Ĳ�������" class="headerlink" title="flink ��ȡcsv�ļ��Ĳ�������,"></a>flink ��ȡcsv�ļ��Ĳ�������,</h2><p>val csvInput = env.readCsvFile<a href="&quot;hdfs:///the/CSV/file&quot;,
  includedFields = Array(0, 3">(String, Double)</a>) // take the first and the fourth field</p>
<p>lineDelimiter: ������֮���ķָ���,Ĭ����’\n’.</p>
<p>fieldDelimiter: ÿ�����ݼ��ķָ���,Ĭ���� ‘,’.</p>
<p>includeFields: Array[Int] ��Ҫ���˵��ֶ�,Ҳ����ÿ�зָ���Ҫ���µ��ļ���.</p>
<p>pojoFields: Array[String] ����ʵ����Ҫ���µ��ֶ�.</p>
<p>parseQuotedStrings: Character enables quoted string parsing. Strings are parsed as quoted strings if the first character of the string field is the quote character (leading or tailing whitespaces are not trimmed). Field delimiters within quoted strings are ignored. Quoted string parsing fails if the last character of a quoted string field is not the quote character. If quoted string parsing is enabled and the first character of the field is not the quoting string, the string is parsed as unquoted string. By default, quoted string parsing is disabled.</p>
<p>ignoreComments: String specifies a comment prefix. All lines that start with the specified comment prefix are not parsed and ignored. By default, no lines are ignored.</p>
<p>lenient: Boolean enables lenient parsing, i.e., lines that cannot be correctly parsed are ignored. By default, lenient parsing is disabled and invalid lines raise an exception.</p>
<p>ignoreFirstLine: �Ƿ����Ե�һ��,��Ϊ��һ����ʱ��Ϊ�˽����õ�.</p>
<h2 id="����L¼�µ������l�"><a href="#����L¼�µ������l�" class="headerlink" title="����Ŀ¼�µ������ļ�,"></a>����Ŀ¼�µ������ļ�,</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// enable recursive enumeration of nested input files</div><div class="line">val env  = ExecutionEnvironment.getExecutionEnvironment</div><div class="line"></div><div class="line">// create a configuration object</div><div class="line">val parameters = new Configuration</div><div class="line"></div><div class="line">// set the recursive enumeration parameter</div><div class="line">parameters.setBoolean(&quot;recursive.file.enumeration&quot;, true) //���ݹ�����Ŀ¼����Ϊtrue</div><div class="line"></div><div class="line">// pass the configuration to the data source</div><div class="line">env.readTextFile(&quot;file:///path/with.nested/files&quot;).withParameters(parameters)</div></pre></td></tr></table></figure>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Flink/">Flink</a>►<a class="article-category-link" href="/categories/Flink/����/">����</a>►<a class="article-category-link" href="/categories/Flink/����/����/">����</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/����/">����</a><a href="/tags/���z���/">���ż���</a><a href="/tags/ʵ������/">ʵ������</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="https://chlyzzo.github.io/2017/05/19/flink学习/" data-title="Flinkѧϰ | 山上掏金" data-tsina="1724571293" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2017/06/02/flink在yarn上搭建/" title="Flink��YARN�ϴ">
  <strong>上一篇：</strong><br/>
  <span>
  Flink��YARN�ϴ</span>
</a>
</div>


<div class="next">
<a href="/2017/05/18/hive笛卡尔积优化/"  title="hive笛卡尔积优化">
 <strong>下一篇：</strong><br/> 
 <span>hive笛卡尔积优化
</span>
</a>
</div>

</nav>

	

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#flink-��datastrema��window����"><span class="toc-number">1.</span> <span class="toc-text">flink ��datastrema��window����</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#flink�µ�windows��time���ͣ�"><span class="toc-number">1.1.</span> <span class="toc-text">flink�µ�windows��time���ͣ�</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flink�µJ��ڶ��壬"><span class="toc-number">2.</span> <span class="toc-text">flink�µĴ��ڶ��壬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WindowedStream"><span class="toc-number">3.</span> <span class="toc-text">WindowedStream</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flink���еĲ�������"><span class="toc-number">4.</span> <span class="toc-text">flink���еĲ�������,</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flink�ܹ�����ѧϰ"><span class="toc-number">5.</span> <span class="toc-text">flink�ܹ�����ѧϰ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#��������o������"><span class="toc-number">5.1.</span> <span class="toc-text">��������ô������?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#�ֲ�ʽ-yarn-��A"><span class="toc-number">6.</span> <span class="toc-text">�ֲ�ʽ,yarn,��Ⱥ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#�dz��oL���flink�µl����Ͳ���"><span class="toc-number">7.</span> <span class="toc-text">�ǳ��õĽ���flink�µĺ����Ͳ���</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#��������-�ڹ��캯����ʹ��"><span class="toc-number">8.</span> <span class="toc-text">��������,�ڹ��캯����ʹ��</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ʹ��withParameters-Configuration"><span class="toc-number">9.</span> <span class="toc-text">ʹ��withParameters(Configuration)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#o�ֲ���"><span class="toc-number">10.</span> <span class="toc-text">ȫ�ֲ���</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#richfunction��ʹ��"><span class="toc-number">11.</span> <span class="toc-text">richfunction��ʹ��</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#state��ʹ��"><span class="toc-number">12.</span> <span class="toc-text">state��ʹ��</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flink-�µ�����-��������"><span class="toc-number">13.</span> <span class="toc-text">flink �µ�����,��������</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#flink-��ȡcsv�l��Ĳ�������"><span class="toc-number">14.</span> <span class="toc-text">flink ��ȡcsv�ļ��Ĳ�������,</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#����L¼�µ������l�"><span class="toc-number">15.</span> <span class="toc-text">����Ŀ¼�µ������ļ�,</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Flink/" title="Flink">Flink<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Flink/YARN/" title="YARN">YARN<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/hive/" title="hive">hive<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Flink/����/" title="����">����<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Flink/����/����/" title="����">����<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/����/" title="����">����<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/�/" title="�">�<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/���z���/" title="���ż���">���ż���<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/ʵ������/" title="ʵ������">ʵ������<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/优化/" title="优化">优化<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/笛卡尔积/" title="笛卡尔积">笛卡尔积<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://flink.apache.org/" target="_blank" title="Flink">Flink</a>
            
          </li>
        
    </ul>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 你现在学的以后终将用到， <br/>
			别被时间打脸.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/1724571293" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/chlyzzo" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		<a href="mailto:rimin515@sina.cn" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2017 
		
		<a href="/about" target="_blank" title="wenxi">wenxi</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>









<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?429f38d3d6ccb4eb5fdff3bcb2e9bb80";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
